

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>azure.servicebus.aio package &mdash; Azure SDK for Python 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="azure.servicebus.common package" href="azure.servicebus.common.html" />
    <link rel="prev" title="azure.servicebus package" href="azure.servicebus.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Azure SDK for Python
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart_authentication.html">Resource Management Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multicloud.html">Multi-cloud - use Azure on all regions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions.html">Exception handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../servicemanagement.html">Service Management (Legacy)</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="azure.common.html">azure.common package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.applicationinsights.html">azure.applicationinsights package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.batch.html">azure.batch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.anomalydetector.html">azure.cognitiveservices.anomalydetector package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.knowledge.qnamaker.html">azure.cognitiveservices.knowledge.qnamaker package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.language.luis.authoring.html">azure.cognitiveservices.language.luis.authoring package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.language.luis.runtime.html">azure.cognitiveservices.language.luis.runtime package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.language.spellcheck.html">azure.cognitiveservices.language.spellcheck package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.language.textanalytics.html">azure.cognitiveservices.language.textanalytics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.autosuggest.html">azure.cognitiveservices.search.autosuggest package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.customimagesearch.html">azure.cognitiveservices.search.customimagesearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.customsearch.html">azure.cognitiveservices.search.customsearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.entitysearch.html">azure.cognitiveservices.search.entitysearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.imagesearch.html">azure.cognitiveservices.search.imagesearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.newssearch.html">azure.cognitiveservices.search.newssearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.videosearch.html">azure.cognitiveservices.search.videosearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.visualsearch.html">azure.cognitiveservices.search.visualsearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.search.websearch.html">azure.cognitiveservices.search.websearch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.vision.computervision.html">azure.cognitiveservices.vision.computervision package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.vision.contentmoderator.html">azure.cognitiveservices.vision.contentmoderator package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.vision.customvision.prediction.html">azure.cognitiveservices.vision.customvision.prediction package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.vision.customvision.training.html">azure.cognitiveservices.vision.customvision.training package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cognitiveservices.vision.face.html">azure.cognitiveservices.vision.face package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.core.html">azure.core package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.cosmos.html">azure.cosmos package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.eventgrid.html">azure.eventgrid package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.eventhub.html">azure.eventhub package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.eventhub.extensions.html">azure.eventhub.extensions package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.graphrbac.html">azure.graphrbac package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.identity.html">azure.identity package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.keyvault.keys.html">azure.keyvault.keys package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.keyvault.secrets.html">azure.keyvault.secrets package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.loganalytics.html">azure.loganalytics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.advisor.html">azure.mgmt.advisor package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.alertsmanagement.html">azure.mgmt.alertsmanagement package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.apimanagement.html">azure.mgmt.apimanagement package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.applicationinsights.html">azure.mgmt.applicationinsights package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.authorization.html">azure.mgmt.authorization package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.automation.html">azure.mgmt.automation package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.batch.html">azure.mgmt.batch package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.batchai.html">azure.mgmt.batchai package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.billing.html">azure.mgmt.billing package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.cdn.html">azure.mgmt.cdn package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.cognitiveservices.html">azure.mgmt.cognitiveservices package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.commerce.html">azure.mgmt.commerce package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.compute.html">azure.mgmt.compute package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.consumption.html">azure.mgmt.consumption package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.containerinstance.html">azure.mgmt.containerinstance package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.containerregistry.html">azure.mgmt.containerregistry package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.containerservice.html">azure.mgmt.containerservice package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.cosmosdb.html">azure.mgmt.cosmosdb package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.databricks.html">azure.mgmt.databricks package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datafactory.html">azure.mgmt.datafactory package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datalake.analytics.account.html">azure.mgmt.datalake.analytics.account package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datalake.analytics.catalog.html">azure.mgmt.datalake.analytics.catalog package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datalake.analytics.job.html">azure.mgmt.datalake.analytics.job package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datalake.store.html">azure.mgmt.datalake.store package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.datamigration.html">azure.mgmt.datamigration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.devspaces.html">azure.mgmt.devspaces package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.devtestlabs.html">azure.mgmt.devtestlabs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.dns.html">azure.mgmt.dns package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.eventgrid.html">azure.mgmt.eventgrid package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.eventhub.html">azure.mgmt.eventhub package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.hanaonazure.html">azure.mgmt.hanaonazure package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.hdinsight.html">azure.mgmt.hdinsight package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.imagebuilder.html">azure.mgmt.imagebuilder package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.iotcentral.html">azure.mgmt.iotcentral package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.iothub.html">azure.mgmt.iothub package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.iothubprovisioningservices.html">azure.mgmt.iothubprovisioningservices package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.keyvault.html">azure.mgmt.keyvault package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.kusto.html">azure.mgmt.kusto package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.labservices.html">azure.mgmt.labservices package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.loganalytics.html">azure.mgmt.loganalytics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.logic.html">azure.mgmt.logic package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.machinelearningcompute.html">azure.mgmt.machinelearningcompute package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.managementgroups.html">azure.mgmt.managementgroups package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.managementpartner.html">azure.mgmt.managementpartner package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.maps.html">azure.mgmt.maps package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.marketplaceordering.html">azure.mgmt.marketplaceordering package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.media.html">azure.mgmt.media package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.mixedreality.html">azure.mgmt.mixedreality package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.monitor.html">azure.mgmt.monitor package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.msi.html">azure.mgmt.msi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.netapp.html">azure.mgmt.netapp package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.network.html">azure.mgmt.network package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.notificationhubs.html">azure.mgmt.notificationhubs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.policyinsights.html">azure.mgmt.policyinsights package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.powerbiembedded.html">azure.mgmt.powerbiembedded package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.rdbms.mariadb.html">azure.mgmt.rdbms.mariadb package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.rdbms.mysql.html">azure.mgmt.rdbms.mysql package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.rdbms.postgresql.html">azure.mgmt.rdbms.postgresql package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.recoveryservices.html">azure.mgmt.recoveryservices package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.recoveryservicesbackup.html">azure.mgmt.recoveryservicesbackup package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.redis.html">azure.mgmt.redis package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.relay.html">azure.mgmt.relay package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.features.html">azure.mgmt.resource.features package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.links.html">azure.mgmt.resource.links package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.locks.html">azure.mgmt.resource.locks package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.managedapplications.html">azure.mgmt.resource.managedapplications package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.policy.html">azure.mgmt.resource.policy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.resources.html">azure.mgmt.resource.resources package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resource.subscriptions.html">azure.mgmt.resource.subscriptions package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.resourcegraph.html">azure.mgmt.resourcegraph package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.scheduler.html">azure.mgmt.scheduler package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.search.html">azure.mgmt.search package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.security.html">azure.mgmt.security package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.servermanager.html">azure.mgmt.servermanager package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.servicebus.html">azure.mgmt.servicebus package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.servicefabric.html">azure.mgmt.servicefabric package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.signalr.html">azure.mgmt.signalr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.sql.html">azure.mgmt.sql package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.sqlvirtualmachine.html">azure.mgmt.sqlvirtualmachine package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.storage.html">azure.mgmt.storage package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.subscription.html">azure.mgmt.subscription package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.trafficmanager.html">azure.mgmt.trafficmanager package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.mgmt.web.html">azure.mgmt.web package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="azure.servicebus.html">azure.servicebus package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="azure.servicebus.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">azure.servicebus.aio package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_base_handler">azure.servicebus.aio.async_base_handler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_client">azure.servicebus.aio.async_client module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_message">azure.servicebus.aio.async_message module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_receive_handler">azure.servicebus.aio.async_receive_handler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_send_handler">azure.servicebus.aio.async_send_handler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio.async_utils">azure.servicebus.aio.async_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-azure.servicebus.aio">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="azure.servicebus.common.html">azure.servicebus.common package</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure.servicebus.control_client.html">azure.servicebus.control_client package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#module-azure.servicebus.base_handler">azure.servicebus.base_handler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#module-azure.servicebus.receive_handler">azure.servicebus.receive_handler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#module-azure.servicebus.send_handler">azure.servicebus.send_handler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#module-azure.servicebus.servicebus_client">azure.servicebus.servicebus_client module</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure.servicebus.html#module-azure.servicebus">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="azure.servicefabric.html">azure.servicefabric package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.storage.blob.html">azure.storage.blob package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.storage.file.html">azure.storage.file package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.storage.queue.html">azure.storage.queue package</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.servicemanagement.html">azure.servicemanagement package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Azure SDK for Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="azure.servicebus.html">azure.servicebus package</a> &raquo;</li>
        
      <li>azure.servicebus.aio package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/ref/azure.servicebus.aio.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="azure-servicebus-aio-package">
<h1>azure.servicebus.aio package<a class="headerlink" href="#azure-servicebus-aio-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-azure.servicebus.aio.async_base_handler">
<span id="azure-servicebus-aio-async-base-handler-module"></span><h2>azure.servicebus.aio.async_base_handler module<a class="headerlink" href="#module-azure.servicebus.aio.async_base_handler" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_base_handler.BaseHandler">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_base_handler.</code><code class="sig-name descname">BaseHandler</code><span class="sig-paren">(</span><em class="sig-param">endpoint</em>, <em class="sig-param">auth_config</em>, <em class="sig-param">*</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">connection=None</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_base_handler.html#BaseHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_base_handler.BaseHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="azure.servicebus.aio.async_base_handler.BaseHandler.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_base_handler.html#BaseHandler.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_base_handler.BaseHandler.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close down the handler connection.</p>
<p>If the handler has already closed,
this operation will do nothing. An optional exception can be passed in to
indicate that the handler was shutdown due to error.
It is recommended to open a handler within a context manager as
opposed to calling the method directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exception</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#Exception" title="(in Python v3.5)"><em>Exception</em></a>) – An optional exception if the handler is closing
due to an error.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Explicitly open and close a Sender.</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">sender</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">))</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_base_handler.BaseHandler.open">
<em class="property">async </em><code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_base_handler.html#BaseHandler.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_base_handler.BaseHandler.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open handler connection and authenticate session.</p>
<p>If the handler is already open, this operation will do nothing.
A handler opened with this method must be explicitly closed.
It is recommended to open a handler within a context manager as
opposed to calling the method directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is not thread-safe.</p>
</div>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Explicitly open and close a Sender.</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">sender</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">))</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_base_handler.BaseHandler.reconnect">
<em class="property">async </em><code class="sig-name descname">reconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_base_handler.html#BaseHandler.reconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_base_handler.BaseHandler.reconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect the handler.</p>
<p>If the handler was disconnected from the service with
a retryable error - attempt to reconnect.
This method will be called automatically for most retryable errors.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio.async_client">
<span id="azure-servicebus-aio-async-client-module"></span><h2>azure.servicebus.aio.async_client module<a class="headerlink" href="#module-azure.servicebus.aio.async_client" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_client.BaseClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">BaseClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#BaseClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.BaseClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.mixins.BaseClient" title="azure.servicebus.common.mixins.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.mixins.BaseClient</span></code></a></p>
<p>Construct a new Client to interact with the named Service Bus entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the entity to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.QueueClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">QueueClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#QueueClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.QueueClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.SendClientMixin" title="azure.servicebus.aio.async_client.SendClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.SendClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.ReceiveClientMixin" title="azure.servicebus.aio.async_client.ReceiveClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.ReceiveClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A queue client.</p>
<p>The QueueClient class defines a high level interface for sending
messages to and receiving messages from an Azure Service Bus queue.
If you do not wish to perform management operations, a QueueClient can be
instantiated directly to perform send and receive operations to a Queue.
However if a QueueClient is created directly, a <cite>get_properties</cite> operation will
need to be completed in order to retrieve the properties of this queue (for example,
whether it is sessionful).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the queue to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Create a QueueClient.</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">QueueClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">queue_client</span> <span class="o">=</span> <span class="n">QueueClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MyQueue&quot;</span><span class="p">)</span>
<span class="n">queue_properties</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>

</pre></div>
</div>
</div>
<p>Construct a new Client to interact with the named Service Bus entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the entity to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">ReceiveClientMixin</code><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.get_deadletter_receiver">
<code class="sig-name descname">get_deadletter_receiver</code><span class="sig-paren">(</span><em class="sig-param">transfer_deadletter=False</em>, <em class="sig-param">prefetch=0</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em>, <em class="sig-param">idle_timeout=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.get_deadletter_receiver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.get_deadletter_receiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Receiver for the deadletter endpoint of the entity.</p>
<p>A Receiver represents a single open connection with which multiple receive operations can be made.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transfer_deadletter</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to connect to the transfer deadletter queue, or the standard
deadletter queue. Default is False, using the standard deadletter endpoint.</p></li>
<li><p><strong>prefetch</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of messages to cache with each request to the service.
The default value is 0, meaning messages will be received from the service and processed
one at a time. Increasing this value will improve message throughput performance but increase
the change that messages will expire while they are cached if they’re not processed fast enough.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The mode with which messages will be retrieved from the entity. The two options
are PeekLock and ReceiveAndDelete. Messages received with PeekLock must be settled within a given
lock period before they will be removed from the queue. Messages received with ReceiveAndDelete
will be immediately removed from the queue, and cannot be subsequently rejected or re-received if
the client fails to process the message. The default mode is PeekLock.</p></li>
<li><p><strong>idle_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The timeout in seconds between received messages after which the receiver will
automatically shutdown. The default value is 0, meaning no timeout.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Receiver instance with an unopened Connection.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#azure.servicebus.aio.async_receive_handler.Receiver" title="azure.servicebus.aio.async_receive_handler.Receiver">Receiver</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Receive dead-lettered messages.</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">dead_letter</span><span class="p">()</span>

<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_deadletter_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.get_receiver">
<code class="sig-name descname">get_receiver</code><span class="sig-paren">(</span><em class="sig-param">session=None</em>, <em class="sig-param">prefetch=0</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em>, <em class="sig-param">idle_timeout=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.get_receiver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.get_receiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Receiver for the Service Bus endpoint.</p>
<p>A Receiver represents a single open connection with which multiple receive operations can be made.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><em>NEXT_AVAILABLE</em>) – A specific session from which to receive. This must be specified for a
sessionful entity, otherwise it must be None. In order to receive the next available
session, set this to NEXT_AVAILABLE.</p></li>
<li><p><strong>prefetch</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of messages to cache with each request to the service.
The default value is 0, meaning messages will be received from the service and processed
one at a time. Increasing this value will improve message throughput performance but increase
the chance that messages will expire while they are cached if they’re not processed fast enough.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The mode with which messages will be retrieved from the entity. The two options
are PeekLock and ReceiveAndDelete. Messages received with PeekLock must be settled within a given
lock period before they will be removed from the queue. Messages received with ReceiveAndDelete
will be immediately removed from the queue, and cannot be subsequently rejected or re-received if
the client fails to process the message. The default mode is PeekLock.</p></li>
<li><p><strong>idle_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The timeout in seconds between received messages after which the receiver will
automatically shutdown. The default value is 0, meaning no timeout.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Receiver instance with an unopened connection.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#azure.servicebus.aio.async_receive_handler.Receiver" title="azure.servicebus.aio.async_receive_handler.Receiver">Receiver</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Receive messages with a Receiver.</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.list_sessions">
<em class="property">async </em><code class="sig-name descname">list_sessions</code><span class="sig-paren">(</span><em class="sig-param">updated_since=None</em>, <em class="sig-param">max_results=100</em>, <em class="sig-param">skip=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.list_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.list_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>List session IDs.</p>
<p>List the IDs of sessions in the queue with pending messages and where the state of the session
has been updated since the timestamp provided. If no timestamp is provided, all will be returned.
If the state of a session has never been set, it will not be returned regardless of whether
there are messages pending.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updated_since</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><em>datetime</em></a>) – The UTC datetime from which to return updated pending session IDs.</p></li>
<li><p><strong>max_results</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of session IDs to return. Default value is 100.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The page value to jump to. Default value is 0.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.peek">
<em class="property">async </em><code class="sig-name descname">peek</code><span class="sig-paren">(</span><em class="sig-param">count=1</em>, <em class="sig-param">start_from=0</em>, <em class="sig-param">session=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.peek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Browse messages currently pending in the queue.</p>
<p>Peeked messages are not removed from queue, nor are they locked. They cannot be completed,
deferred or dead-lettered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of messages to try and peek. The default
value is 1.</p></li>
<li><p><strong>start_from</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – A message sequence number from which to start browsing messages.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – If the entity requires sessions, a session ID must be supplied
in order that only messages from that session will be browsed. If the entity
does not require sessions this value will be ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.PeekMessage" title="azure.servicebus.common.message.PeekMessage">PeekMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Peek messages in the queue.</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peeked_messages</span> <span class="o">=</span> <span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.receive_deferred_messages">
<em class="property">async </em><code class="sig-name descname">receive_deferred_messages</code><span class="sig-paren">(</span><em class="sig-param">sequence_numbers</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.receive_deferred_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.receive_deferred_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive messages that have previously been deferred.</p>
<p>When receiving deferred messages from a partitioned entity, all of the supplied
sequence numbers must be messages from the same partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence_numbers</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a><em>]</em>) – A list of the sequence numbers of messages that have been
deferred.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The mode with which messages will be retrieved from the entity. The two options
are PeekLock and ReceiveAndDelete. Messages received with PeekLock must be settled within a given
lock period before they will be removed from the queue. Messages received with ReceiveAndDelete
will be immediately removed from the queue, and cannot be subsequently rejected or re-received if
the client fails to process the message. The default mode is PeekLock.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_message.DeferredMessage" title="azure.servicebus.aio.async_message.DeferredMessage">DeferredMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Defer messages, then retrieve them by sequence number.</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sequence_numbers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">sequence_numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">sequence_number</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">defer</span><span class="p">()</span>
        <span class="k">break</span>

<span class="n">deferred</span> <span class="o">=</span> <span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">receive_deferred_messages</span><span class="p">(</span><span class="n">sequence_numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ReceiveClientMixin.settle_deferred_messages">
<em class="property">async </em><code class="sig-name descname">settle_deferred_messages</code><span class="sig-paren">(</span><em class="sig-param">settlement</em>, <em class="sig-param">messages</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ReceiveClientMixin.settle_deferred_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ReceiveClientMixin.settle_deferred_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Settle messages that have been previously deferred.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settlement</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – How the messages are to be settled. This must be a string
of one of the following values: ‘completed’, ‘suspended’, ‘abandoned’.</p></li>
<li><p><strong>messages</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)"><em>list</em></a><em>[</em><a class="reference internal" href="#azure.servicebus.aio.async_message.DeferredMessage" title="azure.servicebus.aio.async_message.DeferredMessage"><em>DeferredMessage</em></a><em>]</em>) – A list of deferred messages to be settled.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Settle deferred messages.</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">deferred</span> <span class="o">=</span> <span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">receive_deferred_messages</span><span class="p">(</span><span class="n">sequence_numbers</span><span class="p">)</span>

    <span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">settle_deferred_messages</span><span class="p">(</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="n">deferred</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.SendClientMixin">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">SendClientMixin</code><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SendClientMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SendClientMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="azure.servicebus.aio.async_client.SendClientMixin.get_sender">
<code class="sig-name descname">get_sender</code><span class="sig-paren">(</span><em class="sig-param">message_timeout=0</em>, <em class="sig-param">session=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SendClientMixin.get_sender"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SendClientMixin.get_sender" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Sender for the Service Bus endpoint.</p>
<p>A Sender represents a single open connection within which multiple send operations can be made.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The period in seconds during which messages sent with
this Sender must be sent. If the send is not completed in this time it will fail.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><em>Guid</em>) – An optional session ID. If supplied this session ID will be
applied to every outgoing message sent with this Sender.
If an individual message already has a session ID, that will be
used instead. If no session ID is supplied here, nor set on an outgoing
message, a ValueError will be raised if the entity is sessionful.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Sender instance with an unopened connection.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#azure.servicebus.aio.async_send_handler.Sender" title="azure.servicebus.aio.async_send_handler.Sender">Sender</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Send multiple messages with a Sender.</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.SendClientMixin.send">
<em class="property">async </em><code class="sig-name descname">send</code><span class="sig-paren">(</span><em class="sig-param">messages</em>, <em class="sig-param">message_timeout=0</em>, <em class="sig-param">session=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SendClientMixin.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SendClientMixin.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send one or more messages to the current entity.</p>
<p>This operation will open a single-use connection, send the supplied messages, and close
connection. If the entity requires sessions, a session ID must be either
provided here, or set on each outgoing message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a><em> or
</em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)"><em>list</em></a><em>[</em><a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a><em>]</em>) – One or more messages to be sent.</p></li>
<li><p><strong>message_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The period in seconds during which the Message must be
sent. If the send is not completed in this time it will return a failure result.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><em>Guid</em>) – An optional session ID. If supplied this session ID will be
applied to every outgoing message sent with this Sender.
If an individual message already has a session ID, that will be
used instead. If no session ID is supplied here, nor set on an outgoing
message, a ValueError will be raised if the entity is sessionful.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSendFailed</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of the send results of all the messages. Each
send result is a tuple with two values. The first is a boolean, indicating <cite>True</cite>
if the message sent, or <cite>False</cite> if it failed. The second is an error if the message
failed, otherwise it will be <cite>None</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#tuple" title="(in Python v3.5)">tuple</a>[<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)">bool</a>, <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.MessageSendFailed" title="azure.servicebus.common.errors.MessageSendFailed">MessageSendFailed</a>]]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Send a single message.</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Send multiple messages.</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">),</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">)]</span>
<span class="n">await</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">message_timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">ServiceBusClient</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">service_namespace=None</em>, <em class="sig-param">host_base='.servicebus.windows.net'</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">http_request_timeout=65</em>, <em class="sig-param">http_request_session=None</em>, <em class="sig-param">debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.mixins.ServiceBusMixin" title="azure.servicebus.common.mixins.ServiceBusMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.mixins.ServiceBusMixin</span></code></a></p>
<p>A Service Bus client for a namespace with the specified SAS authentication settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>service_namespace</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – Service Bus namespace, required for all operations.</p></li>
<li><p><strong>host_base</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – Optional. Live host base URL. Defaults to Azure URL.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – SAS authentication key name.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – SAS authentication key value.</p></li>
<li><p><strong>loop</strong> – An async event loop.</p></li>
<li><p><strong>http_request_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – Optional. Timeout for the HTTP request, in seconds.</p></li>
<li><p><strong>http_request_session</strong> – Optional. Session object to use for HTTP requests.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output AMQP network trace to the logger.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Create a ServiceBusClient.</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">ServiceBusClient</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">namespace</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_HOSTNAME&#39;</span><span class="p">]</span>
<span class="n">shared_access_policy</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_SAS_POLICY&#39;</span><span class="p">]</span>
<span class="n">shared_access_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_SAS_KEY&#39;</span><span class="p">]</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">ServiceBusClient</span><span class="p">(</span>
    <span class="n">service_namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
    <span class="n">shared_access_key_name</span><span class="o">=</span><span class="n">shared_access_policy</span><span class="p">,</span>
    <span class="n">shared_access_key_value</span><span class="o">=</span><span class="n">shared_access_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.from_connection_string">
<em class="property">classmethod </em><code class="sig-name descname">from_connection_string</code><span class="sig-paren">(</span><em class="sig-param">conn_str</em>, <em class="sig-param">*</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.from_connection_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.from_connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Service Bus client from a connection string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn_str</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The connection string.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Create a ServiceBusClient via a connection string.</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">ServiceBusClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.get_queue">
<code class="sig-name descname">get_queue</code><span class="sig-paren">(</span><em class="sig-param">queue_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.get_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a queue entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the queue.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.QueueClient" title="azure.servicebus.aio.async_client.QueueClient">QueueClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the queue is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Get a QueueClient for the specified queue.</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">queue_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_queue</span><span class="p">(</span><span class="s2">&quot;MyQueue&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.get_subscription">
<code class="sig-name descname">get_subscription</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em>, <em class="sig-param">subscription_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_subscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.get_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a subscription entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic.</p></li>
<li><p><strong>subscription_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the subscription.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.SubscriptionClient" title="azure.servicebus.aio.async_client.SubscriptionClient">SubscriptionClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the subscription is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Get a TopicClient for the specified topic.</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">subscription_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_subscription</span><span class="p">(</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">,</span> <span class="s2">&quot;MySubscription&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.get_topic">
<code class="sig-name descname">get_topic</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_topic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.get_topic" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a topic entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.TopicClient" title="azure.servicebus.aio.async_client.TopicClient">TopicClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the topic is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Get a TopicClient for the specified topic.</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">topic_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_topic</span><span class="p">(</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.list_queues">
<code class="sig-name descname">list_queues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_queues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.list_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get async clients for all queue entities in the namespace.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.QueueClient" title="azure.servicebus.aio.async_client.QueueClient">QueueClient</a>]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.list_subscriptions">
<code class="sig-name descname">list_subscriptions</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_subscriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.list_subscriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for all subscription entities in the topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The topic to list subscriptions for.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.SubscriptionClient" title="azure.servicebus.aio.async_client.SubscriptionClient">SubscriptionClient</a>]</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the topic is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.ServiceBusClient.list_topics">
<code class="sig-name descname">list_topics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_topics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.ServiceBusClient.list_topics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for all topic entities in the namespace.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.TopicClient" title="azure.servicebus.aio.async_client.TopicClient">TopicClient</a>]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.SubscriptionClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">SubscriptionClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SubscriptionClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.ReceiveClientMixin" title="azure.servicebus.aio.async_client.ReceiveClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.ReceiveClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A subscription client.</p>
<p>The SubscriptionClient class defines a high level interface for receiving
messages to an Azure Service Bus Subscription.
If you do not wish to perform management operations, a SubscriptionClient can be
instantiated directly to perform receive operations from a Subscription.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Create a SubscriptionClient.</span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">SubscriptionClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">subscription_client</span> <span class="o">=</span> <span class="n">SubscriptionClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MySubscription&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="o">=</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="n">properties</span> <span class="o">=</span> <span class="n">subscription_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_client.SubscriptionClient.from_connection_string">
<em class="property">classmethod </em><code class="sig-name descname">from_connection_string</code><span class="sig-paren">(</span><em class="sig-param">conn_str</em>, <em class="sig-param">name</em>, <em class="sig-param">topic=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient.from_connection_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SubscriptionClient.from_connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SubscriptionClient from a connection string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn_str</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The connection string.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the Subscription.</p></li>
<li><p><strong>topic</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the Topic, if the EntityName is
not included in the connection string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_client.SubscriptionClient.from_entity">
<em class="property">classmethod </em><code class="sig-name descname">from_entity</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">topic</em>, <em class="sig-param">entity</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient.from_entity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.SubscriptionClient.from_entity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_client.TopicClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_client.</code><code class="sig-name descname">TopicClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#TopicClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_client.TopicClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.SendClientMixin" title="azure.servicebus.aio.async_client.SendClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.SendClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A topic client.</p>
<p>The TopicClient class defines a high level interface for sending
messages to an Azure Service Bus Topic.
If you do not wish to perform management operations, a TopicClient can be
instantiated directly to perform send operations to a Topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Create a TopicClient.</span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">TopicClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">topic_client</span> <span class="o">=</span> <span class="n">TopicClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="n">topic_properties</span> <span class="o">=</span> <span class="n">topic_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Construct a new Client to interact with the named Service Bus entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the entity to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio.async_message">
<span id="azure-servicebus-aio-async-message-module"></span><h2>azure.servicebus.aio.async_message module<a class="headerlink" href="#module-azure.servicebus.aio.async_message" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_message.DeferredMessage">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_message.</code><code class="sig-name descname">DeferredMessage</code><span class="sig-paren">(</span><em class="sig-param">deferred</em>, <em class="sig-param">mode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_message.Message</span></code></a></p>
<p>A message that has been deferred.</p>
<p>A deferred message can be completed,
abandoned, or dead-lettered, however it cannot be deferred again.</p>
<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.abandon">
<em class="property">async </em><code class="sig-name descname">abandon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.abandon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.abandon" title="Permalink to this definition">¶</a></dt>
<dd><p>Abandon the message. This message will be returned to the queue to be reprocessed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.complete">
<em class="property">async </em><code class="sig-name descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Complete the message.</p>
<p>This removes the message from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.dead_letter">
<em class="property">async </em><code class="sig-name descname">dead_letter</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.dead_letter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.dead_letter" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the message to the Dead Letter queue.</p>
<p>The Dead Letter queue is a sub-queue that can be
used to store messages that failed to process correctly, or otherwise require further inspection
or processing. The queue can also be configured to send expired messages to the Dead Letter queue.
To receive dead-lettered messages, use <cite>QueueClient.get_deadletter_receiver()</cite> or
<cite>SubscriptionClient.get_deadletter_receiver()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The reason for dead-lettering the message.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.defer">
<em class="property">async </em><code class="sig-name descname">defer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.defer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>A DeferredMessage cannot be deferred. Raises <cite>ValueError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.lock_token">
<em class="property">property </em><code class="sig-name descname">lock_token</code><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.lock_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.DeferredMessage.settled">
<em class="property">property </em><code class="sig-name descname">settled</code><a class="headerlink" href="#azure.servicebus.aio.async_message.DeferredMessage.settled" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the message has been settled.</p>
<p>This will aways be <cite>True</cite> for a message received using ReceiveAndDelete mode,
otherwise it will be <cite>False</cite> until the message is completed or otherwise settled.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_message.Message">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_message.</code><code class="sig-name descname">Message</code><span class="sig-paren">(</span><em class="sig-param">body</em>, <em class="sig-param">*</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.Message" title="azure.servicebus.common.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.message.Message</span></code></a></p>
<p>A Service Bus Message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>body</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bytes" title="(in Python v3.5)"><em>bytes</em></a>) – The data to send in a single message. The maximum size per message is 256 kB.</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding for string data. Default is UTF-8.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Sending a message with additional properties</span><a class="headerlink" href="#id19" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="s2">&quot;MySessionID&quot;</span>
<span class="n">message</span><span class="o">.</span><span class="n">partition_key</span> <span class="o">=</span> <span class="s2">&quot;UsingSpecificPartition&quot;</span>
<span class="n">message</span><span class="o">.</span><span class="n">user_properties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;custom_data&#39;</span><span class="p">}</span>
<span class="n">message</span><span class="o">.</span><span class="n">time_to_live</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">queue_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Checking the properties on a received message</span><a class="headerlink" href="#id20" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Receiving: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Time to live: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">time_to_live</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sequence number: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">sequence_number</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enqueue Sequence numger: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">enqueue_sequence_number</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Partition ID: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">partition_id</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Partition Key: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">partition_key</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;User Properties: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">user_properties</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Annotations: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">annotations</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Delivery count: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">delivery_count</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Message ID: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">message_id</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Locked until: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">locked_until</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Lock Token: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">lock_token</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enqueued time: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">enqueued_time</span><span class="p">))</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_message.Message.abandon">
<em class="property">async </em><code class="sig-name descname">abandon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.abandon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message.abandon" title="Permalink to this definition">¶</a></dt>
<dd><p>Abandon the message.</p>
<p>This message will be returned to the queue to be reprocessed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.Message.complete">
<em class="property">async </em><code class="sig-name descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Complete the message. This removes the message from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.Message.dead_letter">
<em class="property">async </em><code class="sig-name descname">dead_letter</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.dead_letter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message.dead_letter" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the message to the Dead Letter queue.</p>
<p>The Dead Letter queue is a sub-queue that can be
used to store messages that failed to process correctly, or otherwise require further inspection
or processing. The queue can also be configured to send expired messages to the Dead Letter queue.
To receive dead-lettered messages, use <cite>QueueClient.get_deadletter_receiver()</cite> or
<cite>SubscriptionClient.get_deadletter_receiver()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The reason for dead-lettering the message.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.Message.defer">
<em class="property">async </em><code class="sig-name descname">defer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.defer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>Defer the message.</p>
<p>This message will remain in the queue but must be received
specifically by its sequence number in order to be processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_message.Message.renew_lock">
<em class="property">async </em><code class="sig-name descname">renew_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.renew_lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_message.Message.renew_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Renew the message lock.</p>
<p>This will maintain the lock on the message to ensure
it is not returned to the queue to be reprocessed. In order to complete (or otherwise settle)
the message, the lock must be maintained. Messages received via ReceiveAndDelete mode are not
locked, and therefore cannot be renewed. This operation can also be performed as an asynchronous
background task by registering the message with an <cite>azure.servicebus.aio.AutoLockRenew</cite> instance.
This operation is only available for non-sessionful messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>TypeError if the message is sessionful.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired is message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled is message has already been settled.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio.async_receive_handler">
<span id="azure-servicebus-aio-async-receive-handler-module"></span><h2>azure.servicebus.aio.async_receive_handler module<a class="headerlink" href="#module-azure.servicebus.aio.async_receive_handler" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_receive_handler.</code><code class="sig-name descname">Receiver</code><span class="sig-paren">(</span><em class="sig-param">handler_id</em>, <em class="sig-param">source</em>, <em class="sig-param">auth_config</em>, <em class="sig-param">*</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">connection=None</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/collections.abc.html#collections.abc.AsyncIterator" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.AsyncIterator</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_base_handler.BaseHandler" title="azure.servicebus.aio.async_base_handler.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_base_handler.BaseHandler</span></code></a></p>
<p>A message receiver.</p>
<p>This receive handler acts as an iterable message stream for retrieving
messages for a Service Bus entity. It operates a single connection that must be opened and
closed on completion. The service connection will remain open for the entirety of the iterator.
If you find yourself only partially iterating the message stream, you should run the receiver
in a <cite>with</cite> statement to ensure the connection is closed.
The Receiver should not be instantiated directly, and should be accessed from a <cite>QueueClient</cite> or
<cite>SubscriptionClient</cite> using the <cite>get_receiver()</cite> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This object is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler_id</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The ID used as the connection name for the Receiver.</p></li>
<li><p><strong>source</strong> (<em>Source</em>) – The endpoint from which to receive messages.</p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.5)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>]</em>) – The SASL auth credentials.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>connection</strong> (<em>Connection</em>) – A shared connection [not yet supported].</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The receive connection mode. Value must be either PeekLock or ReceiveAndDelete.</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding used for string properties. Default is ‘UTF-8’.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to enable network trace debug logs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Running a queue receiver within a context manager.</span><a class="headerlink" href="#id21" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close down the receiver connection.</p>
<p>If the receiver has already closed, this operation will do nothing. An optional
exception can be passed in to indicate that the handler was shutdown due to error.
It is recommended to open a handler within a context manager as
opposed to calling the method directly.
The receiver will be implicitly closed on completion of the message iterator,
however this method will need to be called explicitly if the message iterator is not run
to completion.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exception</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#Exception" title="(in Python v3.5)"><em>Exception</em></a>) – An optional exception if the handler is closing
due to an error.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Iterate then explicitly close a Receiver.</span><a class="headerlink" href="#id22" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">receiver</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span>
<span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">break</span>
<span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.fetch_next">
<em class="property">async </em><code class="sig-name descname">fetch_next</code><span class="sig-paren">(</span><em class="sig-param">max_batch_size=None</em>, <em class="sig-param">timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver.fetch_next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.fetch_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a batch of messages at once.</p>
<p>This approach it optimal if you wish to process multiple messages simultaneously.
Note that the number of messages retrieved in a single batch will be dependent on
whether <cite>prefetch</cite> was set for the receiver. This call will prioritize returning
quickly over meeting a specified batch size, and so will return as soon as at least
one message is received and there is a gap in incoming messages regardless
of the specified batch size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_batch_size</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – Maximum number of messages in the batch. Actual number
returned will depend on prefetch size and incoming stream rate.</p></li>
<li><p><strong>timeout</strong> – The time to wait in seconds for the first message to arrive.
If no messages arrive, and no timeout is specified, this call will not return
until the connection is closed. If specified, an no messages arrive within the
timeout period, an empty list will be returned.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message">Message</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Fetch a batch of messages.</span><a class="headerlink" href="#id23" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">prefetch</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">fetch_next</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">])</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.open">
<em class="property">async </em><code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open receiver connection and authenticate session.</p>
<p>If the receiver is already open, this operation will do nothing.
This method will be called automatically when one starts to iterate
messages in the receiver, so there should be no need to call it directly.
A receiver opened with this method must be explicitly closed.
It is recommended to open a handler within a context manager as
opposed to calling the method directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is not thread-safe.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.peek">
<em class="property">async </em><code class="sig-name descname">peek</code><span class="sig-paren">(</span><em class="sig-param">count=1</em>, <em class="sig-param">start_from=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver.peek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Browse messages currently pending in the queue.</p>
<p>Peeked messages are not removed from queue, nor are they locked. They cannot be completed,
deferred or dead-lettered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of messages to try and peek. The default
value is 1.</p></li>
<li><p><strong>start_from</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – A message sequence number from which to start browsing messages.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.PeekMessage" title="azure.servicebus.common.message.PeekMessage">PeekMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Peek messages in the queue.</span><a class="headerlink" href="#id24" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">pending_messages</span> <span class="o">=</span> <span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.queue_size">
<em class="property">property </em><code class="sig-name descname">queue_size</code><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.queue_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The current size of the unprocessed message queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.receive_deferred_messages">
<em class="property">async </em><code class="sig-name descname">receive_deferred_messages</code><span class="sig-paren">(</span><em class="sig-param">sequence_numbers</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#Receiver.receive_deferred_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.receive_deferred_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive messages that have previously been deferred.</p>
<p>When receiving deferred messages from a partitioned entity, all of the supplied
sequence numbers must be messages from the same partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence_numbers</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a><em>]</em>) – A list of the sequence numbers of messages that have been
deferred.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The receive mode, default value is PeekLock.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_message.DeferredMessage" title="azure.servicebus.aio.async_message.DeferredMessage">DeferredMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Defer messages, then retrieve them by sequence number.</span><a class="headerlink" href="#id25" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">()</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">sequence_no</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">sequence_number</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">defer</span><span class="p">()</span>
        <span class="k">break</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">receive_deferred_messages</span><span class="p">([</span><span class="n">sequence_no</span><span class="p">])</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.Receiver.receiver_shutdown">
<em class="property">property </em><code class="sig-name descname">receiver_shutdown</code><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.Receiver.receiver_shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the receiver connection has been marked for shutdown.</p>
<p>If this value is <cite>True</cite> - it does not indicate that the connection
has yet been closed.
This property is used internally and should not be relied upon to asses
the status of the connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_receive_handler.</code><code class="sig-name descname">SessionReceiver</code><span class="sig-paren">(</span><em class="sig-param">handler_id</em>, <em class="sig-param">source</em>, <em class="sig-param">auth_config</em>, <em class="sig-param">*</em>, <em class="sig-param">session=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">connection=None</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_receive_handler.Receiver" title="azure.servicebus.aio.async_receive_handler.Receiver"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_receive_handler.Receiver</span></code></a>, <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.mixins.SessionMixin" title="azure.servicebus.common.mixins.SessionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.mixins.SessionMixin</span></code></a></p>
<p>A session message receiver.</p>
<p>This receive handler acts as an iterable message stream for retrieving
messages for a sessionful Service Bus entity. It operates a single connection that must be opened and
closed on completion. The service connection will remain open for the entirety of the iterator.
If you find yourself only partially iterating the message stream, you should run the receiver
in a <cite>with</cite> statement to ensure the connection is closed.
The Receiver should not be instantiated directly, and should be accessed from a <cite>QueueClient</cite> or
<cite>SubscriptionClient</cite> using the <cite>get_receiver()</cite> method.
When receiving messages from a session, connection errors that would normally be automatically
retried will instead raise an error due to the loss of the lock on a particular session.
A specific session can be specified, or the receiver can retrieve any available session using
the <cite>NEXT_AVAILABLE</cite> constant.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This object is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler_id</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The ID used as the connection name for the Receiver.</p></li>
<li><p><strong>source</strong> (<em>Source</em>) – The endpoint from which to receive messages.</p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.5)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>]</em>) – The SASL auth credentials.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><em>NEXT_AVAILABLE</em>) – The ID of the session to receive from.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>connection</strong> (<em>Connection</em>) – A shared connection [not yet supported].</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The receive connection mode. Value must be either PeekLock or ReceiveAndDelete.</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding used for string properties. Default is ‘UTF-8’.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to enable network trace debug logs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Running a session receiver within a context manager.</span><a class="headerlink" href="#id26" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">Running a session receiver for the next available session.</span><a class="headerlink" href="#id27" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">NEXT_AVAILABLE</span><span class="p">,</span> <span class="n">NoActiveSession</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">NEXT_AVAILABLE</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="k">except</span> <span class="n">NoActiveSession</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.get_session_state">
<em class="property">async </em><code class="sig-name descname">get_session_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.get_session_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.get_session_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the session state.</p>
<p>Returns None if no state has been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)">str</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">Getting and setting the state of a session.</span><a class="headerlink" href="#id28" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">current_state</span> <span class="o">=</span> <span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get_session_state</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">current_state</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="n">set_session_state</span><span class="p">(</span><span class="s2">&quot;OPENED&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.list_sessions">
<em class="property">async </em><code class="sig-name descname">list_sessions</code><span class="sig-paren">(</span><em class="sig-param">updated_since=None</em>, <em class="sig-param">max_results=100</em>, <em class="sig-param">skip=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.list_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.list_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>List session IDs.</p>
<p>List the IDs of sessions in the queue with pending messages and where the state of the session
has been updated since the timestamp provided. If no timestamp is provided, all will be returned.
If the state of a session has never been set, it will not be returned regardless of whether
there are messages pending.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updated_since</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><em>datetime</em></a>) – The UTC datetime from which to return updated pending session IDs.</p></li>
<li><p><strong>max_results</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of session IDs to return. Default value is 100.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The page value to jump to. Default value is 0.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.peek">
<em class="property">async </em><code class="sig-name descname">peek</code><span class="sig-paren">(</span><em class="sig-param">count=1</em>, <em class="sig-param">start_from=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.peek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Browse messages currently pending in the queue.</p>
<p>Peeked messages are not removed from queue, nor are they locked.
They cannot be completed, deferred or dead-lettered.
This operation will only peek pending messages in the current session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The maximum number of messages to try and peek. The default
value is 1.</p></li>
<li><p><strong>start_from</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – A message sequence number from which to start browsing messages.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.PeekMessage" title="azure.servicebus.common.message.PeekMessage">PeekMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">Peek messages in the queue.</span><a class="headerlink" href="#id29" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">NEXT_AVAILABLE</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">pending_messages</span> <span class="o">=</span> <span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.receive_deferred_messages">
<em class="property">async </em><code class="sig-name descname">receive_deferred_messages</code><span class="sig-paren">(</span><em class="sig-param">sequence_numbers</em>, <em class="sig-param">mode=&lt;ReceiveSettleMode.PeekLock: &lt;ReceiverSettleMode.PeekLock: 1&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.receive_deferred_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.receive_deferred_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive messages that have previously been deferred.</p>
<p>This operation can only receive deferred messages from the current session.
When receiving deferred messages from a partitioned entity, all of the supplied
sequence numbers must be messages from the same partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence_numbers</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a><em>]</em>) – A list of the sequence numbers of messages that have been
deferred.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.constants.ReceiveSettleMode" title="azure.servicebus.common.constants.ReceiveSettleMode"><em>ReceiveSettleMode</em></a>) – The receive mode, default value is PeekLock.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_message.DeferredMessage" title="azure.servicebus.aio.async_message.DeferredMessage">DeferredMessage</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">Defer messages, then retrieve them by sequence number.</span><a class="headerlink" href="#id30" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="n">sequence_numbers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="n">sequence_numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">sequence_number</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">defer</span><span class="p">()</span>
        <span class="k">break</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">await</span> <span class="n">receiver</span><span class="o">.</span><span class="n">receive_deferred_messages</span><span class="p">(</span><span class="n">sequence_numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.renew_lock">
<em class="property">async </em><code class="sig-name descname">renew_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.renew_lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.renew_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Renew the session lock.</p>
<p>This operation must be performed periodically in order to retain a lock on the session
to continue message processing. Once the lock is lost the connection will be closed.
This operation can also be performed as an asynchronous background task by registering the session
with an <cite>azure.servicebus.aio.AutoLockRenew</cite> instance.</p>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">Renew the sesison lock.</span><a class="headerlink" href="#id31" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="n">renew_lock</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_receive_handler.SessionReceiver.set_session_state">
<em class="property">async </em><code class="sig-name descname">set_session_state</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_receive_handler.html#SessionReceiver.set_session_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver.set_session_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the session state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bytes" title="(in Python v3.5)"><em>bytes</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bytearray" title="(in Python v3.5)"><em>bytearray</em></a>) – The state value.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text">Getting and setting the state of a session.</span><a class="headerlink" href="#id32" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">current_state</span> <span class="o">=</span> <span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get_session_state</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">current_state</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="n">set_session_state</span><span class="p">(</span><span class="s2">&quot;OPENED&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio.async_send_handler">
<span id="azure-servicebus-aio-async-send-handler-module"></span><h2>azure.servicebus.aio.async_send_handler module<a class="headerlink" href="#module-azure.servicebus.aio.async_send_handler" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_send_handler.Sender">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_send_handler.</code><code class="sig-name descname">Sender</code><span class="sig-paren">(</span><em class="sig-param">handler_id</em>, <em class="sig-param">target</em>, <em class="sig-param">auth_config</em>, <em class="sig-param">*</em>, <em class="sig-param">session=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">connection=None</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_base_handler.BaseHandler" title="azure.servicebus.aio.async_base_handler.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_base_handler.BaseHandler</span></code></a>, <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.mixins.SenderMixin" title="azure.servicebus.common.mixins.SenderMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.mixins.SenderMixin</span></code></a></p>
<p>This handler is for sending messages to a Service Bus entity.</p>
<p>It operates a single connection that must be opened and closed on completion.
The Sender can be run within a context manager to ensure that the connection is closed on exit.
The Sender should not be instantiated directly, and should be accessed from a <cite>QueueClient</cite> or
<cite>TopicClient</cite> using the <cite>get_sender()</cite> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This object is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler_id</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The ID used as the connection name for the Sender.</p></li>
<li><p><strong>target</strong> (<em>Target</em>) – The endpoint to send messages to.</p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.5)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>]</em>) – The SASL auth credentials.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – An optional session ID. If supplied, all outgoing messages will have this
session ID added (unless they already have one specified).</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>connection</strong> (<em>Connection</em>) – A shared connection [not yet supported].</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding used for string properties. Default is ‘UTF-8’.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to enable network trace debug logs.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.Sender.cancel_scheduled_messages">
<em class="property">async </em><code class="sig-name descname">cancel_scheduled_messages</code><span class="sig-paren">(</span><em class="sig-param">*sequence_numbers</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender.cancel_scheduled_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender.cancel_scheduled_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel one or more messages that have previsouly been scheduled and are still pending.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sequence_numbers</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – The seqeuence numbers of the scheduled messages.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">Schedule messages.</span><a class="headerlink" href="#id33" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">enqueue_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">sequence_numbers</span> <span class="o">=</span> <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">enqueue_time</span><span class="p">,</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">),</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>

    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">cancel_scheduled_messages</span><span class="p">(</span><span class="o">*</span><span class="n">sequence_numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.Sender.reconnect">
<em class="property">async </em><code class="sig-name descname">reconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender.reconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender.reconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect the handler.</p>
<p>If the handler was disconnected from the service with
a retryable error - attempt to reconnect.
This method will be called automatically for most retryable errors.
Also attempts to re-queue any messages that were pending before the reconnect.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.Sender.schedule">
<em class="property">async </em><code class="sig-name descname">schedule</code><span class="sig-paren">(</span><em class="sig-param">schedule_time</em>, <em class="sig-param">*messages</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender.schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Send one or more messages to be enqueued at a specific time.</p>
<p>Returns a list of the sequence numbers of the enqueued messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schedule_time</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><em>datetime</em></a>) – The date and time to enqueue the messages.</p></li>
<li><p><strong>messages</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a>) – The messages to schedule.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)">int</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text">Schedule messages.</span><a class="headerlink" href="#id34" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">enqueue_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">enqueue_time</span><span class="p">,</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">),</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.Sender.send">
<em class="property">async </em><code class="sig-name descname">send</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message and blocks until acknowledgement is received or the operation fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a>) – The message to be sent.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSendFailed if the message fails to
send.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-text">Open a Sender and send messages.</span><a class="headerlink" href="#id35" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.Sender.send_pending_messages">
<em class="property">async </em><code class="sig-name descname">send_pending_messages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#Sender.send_pending_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.Sender.send_pending_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until all pending messages have been sent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of the send results of all the pending messages. Each
send result is a tuple with two values. The first is a boolean, indicating <cite>True</cite>
if the message sent, or <cite>False</cite> if it failed. The second is an error if the message
failed, otherwise it will be <cite>None</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#tuple" title="(in Python v3.5)">tuple</a>[<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)">bool</a>, <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.MessageSendFailed" title="azure.servicebus.common.errors.MessageSendFailed">MessageSendFailed</a>]]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text">Schedule messages.</span><a class="headerlink" href="#id36" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">sender</span><span class="o">.</span><span class="n">queue_message</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">))</span>
    <span class="n">sender</span><span class="o">.</span><span class="n">queue_message</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send_pending_messages</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.async_send_handler.SessionSender">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_send_handler.</code><code class="sig-name descname">SessionSender</code><span class="sig-paren">(</span><em class="sig-param">handler_id</em>, <em class="sig-param">target</em>, <em class="sig-param">auth_config</em>, <em class="sig-param">*</em>, <em class="sig-param">session=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">connection=None</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#SessionSender"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.SessionSender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_send_handler.Sender" title="azure.servicebus.aio.async_send_handler.Sender"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_send_handler.Sender</span></code></a></p>
<p>This handler is for sending messages to a sessionful Service Bus entity.</p>
<p>It operates a single connection that must be opened and closed on completion.
The Sender can be run within a context manager to ensure that the connection is closed on exit.
The Sender should not be instantiated directly, and should be accessed from a <cite>QueueClient</cite> or
<cite>TopicClient</cite> using the <cite>get_sender()</cite> method.
An attempt to send a message without a session ID specified either on the Sender or the message
will raise a <cite>ValueError</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This object is not thread-safe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler_id</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The ID used as the connection name for the Sender.</p></li>
<li><p><strong>target</strong> (<em>Target</em>) – The endpoint to send messages to.</p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.5)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em>]</em>) – The SASL auth credentials.</p></li>
<li><p><strong>session</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – An optional session ID. If supplied, all outgoing messages will have this
session ID added (unless they already have one specified).</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>connection</strong> (<em>Connection</em>) – A shared connection [not yet supported].</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding used for string properties. Default is ‘UTF-8’.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to enable network trace debug logs.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.SessionSender.queue_message">
<code class="sig-name descname">queue_message</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#SessionSender.queue_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.SessionSender.queue_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a message to be sent later.</p>
<p>This operation should be followed up with send_pending_messages. If neither the
Sender nor the message has a session ID, a <cite>ValueError</cite> will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a>) – The message to be sent.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text">Schedule messages.</span><a class="headerlink" href="#id37" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">sender</span><span class="o">.</span><span class="n">queue_message</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">))</span>
    <span class="n">sender</span><span class="o">.</span><span class="n">queue_message</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send_pending_messages</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.SessionSender.schedule_messages">
<em class="property">async </em><code class="sig-name descname">schedule_messages</code><span class="sig-paren">(</span><em class="sig-param">schedule_time</em>, <em class="sig-param">*messages</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#SessionSender.schedule_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.SessionSender.schedule_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Send one or more messages to be enqueued at a specific time.</p>
<p>Returns a list of the sequence numbers of the enqueued messages.
If neither the Sender nor the message has a session ID, a <cite>ValueError</cite> will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schedule_time</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><em>datetime</em></a>) – The date and time to enqueue the messages.</p></li>
<li><p><strong>messages</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a>) – The messages to schedule.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)">int</a>]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id38">
<div class="code-block-caption"><span class="caption-text">Schedule messages.</span><a class="headerlink" href="#id38" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">enqueue_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">enqueue_time</span><span class="p">,</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">),</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_send_handler.SessionSender.send">
<em class="property">async </em><code class="sig-name descname">send</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_send_handler.html#SessionSender.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_send_handler.SessionSender.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message and blocks until acknowledgement is received or the operation fails.</p>
<p>If neither the Sender nor the message has a session ID, a <cite>ValueError</cite> will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a>) – The message to be sent.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSendFailed if the message fails to
send.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-text">Open a sessionful Sender and send messages.</span><a class="headerlink" href="#id39" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_sender</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sender</span><span class="p">:</span>

    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;First&quot;</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Second&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio.async_utils">
<span id="azure-servicebus-aio-async-utils-module"></span><h2>azure.servicebus.aio.async_utils module<a class="headerlink" href="#module-azure.servicebus.aio.async_utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.async_utils.AutoLockRenew">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.async_utils.</code><code class="sig-name descname">AutoLockRenew</code><span class="sig-paren">(</span><em class="sig-param">loop=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_utils.AutoLockRenew" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Auto lock renew.</p>
<p>An asynchronous AutoLockRenew handler for renewing the lock
tokens of messages and/or sessions in the background.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-text">Automatically renew a message lock</span><a class="headerlink" href="#id40" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">AutoLockRenew</span>

<span class="n">lock_renewal</span> <span class="o">=</span> <span class="n">AutoLockRenew</span><span class="p">()</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">queue_receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">queue_receiver</span><span class="p">:</span>
        <span class="n">lock_renewal</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-text">Automatically renew a session lock</span><a class="headerlink" href="#id41" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">AutoLockRenew</span>

<span class="n">lock_renewal</span> <span class="o">=</span> <span class="n">AutoLockRenew</span><span class="p">()</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">lock_renewal</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.async_utils.AutoLockRenew.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">renewable</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_utils.AutoLockRenew.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a renewable entity for automatic lock renewal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>renewable</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a><em> or
</em><a class="reference internal" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver" title="azure.servicebus.aio.async_receive_handler.SessionReceiver"><em>SessionReceiver</em></a>) – A locked entity that needs to be renewed.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – A time in seconds that the lock should be maintained for.
Default value is 300 (5 minutes).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.async_utils.AutoLockRenew.shutdown">
<em class="property">async </em><code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.async_utils.AutoLockRenew.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel remaining open lock renewal futures.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-azure.servicebus.aio">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-azure.servicebus.aio" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="azure.servicebus.aio.Message">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">Message</code><span class="sig-paren">(</span><em class="sig-param">body</em>, <em class="sig-param">*</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.Message" title="azure.servicebus.common.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.message.Message</span></code></a></p>
<p>A Service Bus Message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>body</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bytes" title="(in Python v3.5)"><em>bytes</em></a>) – The data to send in a single message. The maximum size per message is 256 kB.</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding for string data. Default is UTF-8.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id42">
<div class="code-block-caption"><span class="caption-text">Sending a message with additional properties</span><a class="headerlink" href="#id42" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="s2">&quot;MySessionID&quot;</span>
<span class="n">message</span><span class="o">.</span><span class="n">partition_key</span> <span class="o">=</span> <span class="s2">&quot;UsingSpecificPartition&quot;</span>
<span class="n">message</span><span class="o">.</span><span class="n">user_properties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;custom_data&#39;</span><span class="p">}</span>
<span class="n">message</span><span class="o">.</span><span class="n">time_to_live</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">queue_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-text">Checking the properties on a received message</span><a class="headerlink" href="#id43" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">receiver</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">receiver</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Receiving: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Time to live: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">time_to_live</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sequence number: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">sequence_number</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enqueue Sequence numger: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">enqueue_sequence_number</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Partition ID: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">partition_id</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Partition Key: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">partition_key</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;User Properties: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">user_properties</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Annotations: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">annotations</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Delivery count: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">delivery_count</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Message ID: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">message_id</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Locked until: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">locked_until</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Lock Token: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">lock_token</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enqueued time: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">enqueued_time</span><span class="p">))</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.Message.abandon">
<em class="property">async </em><code class="sig-name descname">abandon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.abandon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message.abandon" title="Permalink to this definition">¶</a></dt>
<dd><p>Abandon the message.</p>
<p>This message will be returned to the queue to be reprocessed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.Message.complete">
<em class="property">async </em><code class="sig-name descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Complete the message. This removes the message from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.Message.dead_letter">
<em class="property">async </em><code class="sig-name descname">dead_letter</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.dead_letter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message.dead_letter" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the message to the Dead Letter queue.</p>
<p>The Dead Letter queue is a sub-queue that can be
used to store messages that failed to process correctly, or otherwise require further inspection
or processing. The queue can also be configured to send expired messages to the Dead Letter queue.
To receive dead-lettered messages, use <cite>QueueClient.get_deadletter_receiver()</cite> or
<cite>SubscriptionClient.get_deadletter_receiver()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The reason for dead-lettering the message.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.Message.defer">
<em class="property">async </em><code class="sig-name descname">defer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.defer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>Defer the message.</p>
<p>This message will remain in the queue but must be received
specifically by its sequence number in order to be processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.Message.renew_lock">
<em class="property">async </em><code class="sig-name descname">renew_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#Message.renew_lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.Message.renew_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Renew the message lock.</p>
<p>This will maintain the lock on the message to ensure
it is not returned to the queue to be reprocessed. In order to complete (or otherwise settle)
the message, the lock must be maintained. Messages received via ReceiveAndDelete mode are not
locked, and therefore cannot be renewed. This operation can also be performed as an asynchronous
background task by registering the message with an <cite>azure.servicebus.aio.AutoLockRenew</cite> instance.
This operation is only available for non-sessionful messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>TypeError if the message is sessionful.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired is message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled is message has already been settled.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.AutoLockRenew">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">AutoLockRenew</code><span class="sig-paren">(</span><em class="sig-param">loop=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.AutoLockRenew" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Auto lock renew.</p>
<p>An asynchronous AutoLockRenew handler for renewing the lock
tokens of messages and/or sessions in the background.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id44">
<div class="code-block-caption"><span class="caption-text">Automatically renew a message lock</span><a class="headerlink" href="#id44" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">AutoLockRenew</span>

<span class="n">lock_renewal</span> <span class="o">=</span> <span class="n">AutoLockRenew</span><span class="p">()</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">queue_receiver</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">queue_receiver</span><span class="p">:</span>
        <span class="n">lock_renewal</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id45">
<div class="code-block-caption"><span class="caption-text">Automatically renew a session lock</span><a class="headerlink" href="#id45" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">AutoLockRenew</span>

<span class="n">lock_renewal</span> <span class="o">=</span> <span class="n">AutoLockRenew</span><span class="p">()</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_receiver</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="s2">&quot;MySessionID&quot;</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">lock_renewal</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">process_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">message</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.AutoLockRenew.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">renewable</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.AutoLockRenew.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a renewable entity for automatic lock renewal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>renewable</strong> (<a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><em>Message</em></a><em> or
</em><a class="reference internal" href="#azure.servicebus.aio.async_receive_handler.SessionReceiver" title="azure.servicebus.aio.async_receive_handler.SessionReceiver"><em>SessionReceiver</em></a>) – A locked entity that needs to be renewed.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – A time in seconds that the lock should be maintained for.
Default value is 300 (5 minutes).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.AutoLockRenew.shutdown">
<em class="property">async </em><code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_utils.html#AutoLockRenew.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.AutoLockRenew.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel remaining open lock renewal futures.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.BatchMessage">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">BatchMessage</code><span class="sig-paren">(</span><em class="sig-param">body</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#BatchMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.BatchMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.Message" title="azure.servicebus.common.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.message.Message</span></code></a></p>
<p>A batch of messages combined into a single message body.</p>
<p>The body of the messages in the batch should be supplied by an iterable,
such as a generator.
If the contents of the iterable exceeds the maximum size of a single message (256 kB),
the data will be broken up across multiple messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>body</strong> (<em>Iterable</em>) – The data to send in each message in the batch. The maximum size per message is 256 kB.
If data is supplied in excess of this limit, multiple messages will be sent.</p></li>
<li><p><strong>encoding</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The encoding for string data. Default is UTF-8.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-text">Send a batched message.</span><a class="headerlink" href="#id46" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">BatchMessage</span>

<span class="k">def</span> <span class="nf">batched_data</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="k">yield</span> <span class="s2">&quot;Batched Message no. {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">message</span> <span class="o">=</span> <span class="n">BatchMessage</span><span class="p">(</span><span class="n">batched_data</span><span class="p">())</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.PeekMessage">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">PeekMessage</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.message.Message" title="azure.servicebus.common.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.message.Message</span></code></a></p>
<p>A preview message.</p>
<p>This message is still on the queue, and unlocked.
A peeked message cannot be completed, abandoned, dead-lettered or deferred.
It has no lock token or expiry.</p>
<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.abandon">
<code class="sig-name descname">abandon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage.abandon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.abandon" title="Permalink to this definition">¶</a></dt>
<dd><p>A PeekMessage cannot be abandoned. Raises <cite>TypeError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.complete">
<code class="sig-name descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>A PeekMessage cannot be completed Raises <cite>TypeError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.dead_letter">
<code class="sig-name descname">dead_letter</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage.dead_letter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.dead_letter" title="Permalink to this definition">¶</a></dt>
<dd><p>A PeekMessage cannot be dead-lettered. Raises <cite>TypeError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.defer">
<code class="sig-name descname">defer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage.defer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>A PeekMessage cannot be deferred. Raises <cite>TypeError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.lock_token">
<em class="property">property </em><code class="sig-name descname">lock_token</code><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.lock_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.locked_until">
<em class="property">property </em><code class="sig-name descname">locked_until</code><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.locked_until" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.PeekMessage.renew_lock">
<code class="sig-name descname">renew_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/message.html#PeekMessage.renew_lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.PeekMessage.renew_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>A PeekMessage cannot be renewed. Raises <cite>TypeError</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.DeferredMessage">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">DeferredMessage</code><span class="sig-paren">(</span><em class="sig-param">deferred</em>, <em class="sig-param">mode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_message.Message" title="azure.servicebus.aio.async_message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_message.Message</span></code></a></p>
<p>A message that has been deferred.</p>
<p>A deferred message can be completed,
abandoned, or dead-lettered, however it cannot be deferred again.</p>
<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.abandon">
<em class="property">async </em><code class="sig-name descname">abandon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.abandon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.abandon" title="Permalink to this definition">¶</a></dt>
<dd><p>Abandon the message. This message will be returned to the queue to be reprocessed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.complete">
<em class="property">async </em><code class="sig-name descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Complete the message.</p>
<p>This removes the message from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.SessionLockExpired if session lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.dead_letter">
<em class="property">async </em><code class="sig-name descname">dead_letter</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.dead_letter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.dead_letter" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the message to the Dead Letter queue.</p>
<p>The Dead Letter queue is a sub-queue that can be
used to store messages that failed to process correctly, or otherwise require further inspection
or processing. The queue can also be configured to send expired messages to the Dead Letter queue.
To receive dead-lettered messages, use <cite>QueueClient.get_deadletter_receiver()</cite> or
<cite>SubscriptionClient.get_deadletter_receiver()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The reason for dead-lettering the message.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageAlreadySettled if the message has been settled.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.MessageLockExpired if message lock has already expired.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.MessageSettleFailed if message settle operation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.defer">
<em class="property">async </em><code class="sig-name descname">defer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_message.html#DeferredMessage.defer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.defer" title="Permalink to this definition">¶</a></dt>
<dd><p>A DeferredMessage cannot be deferred. Raises <cite>ValueError</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.lock_token">
<em class="property">property </em><code class="sig-name descname">lock_token</code><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.lock_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.DeferredMessage.settled">
<em class="property">property </em><code class="sig-name descname">settled</code><a class="headerlink" href="#azure.servicebus.aio.DeferredMessage.settled" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the message has been settled.</p>
<p>This will aways be <cite>True</cite> for a message received using ReceiveAndDelete mode,
otherwise it will be <cite>False</cite> until the message is completed or otherwise settled.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.ServiceBusClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ServiceBusClient</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">service_namespace=None</em>, <em class="sig-param">host_base='.servicebus.windows.net'</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">http_request_timeout=65</em>, <em class="sig-param">http_request_session=None</em>, <em class="sig-param">debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.mixins.ServiceBusMixin" title="azure.servicebus.common.mixins.ServiceBusMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.mixins.ServiceBusMixin</span></code></a></p>
<p>A Service Bus client for a namespace with the specified SAS authentication settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>service_namespace</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – Service Bus namespace, required for all operations.</p></li>
<li><p><strong>host_base</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – Optional. Live host base URL. Defaults to Azure URL.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – SAS authentication key name.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – SAS authentication key value.</p></li>
<li><p><strong>loop</strong> – An async event loop.</p></li>
<li><p><strong>http_request_timeout</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) – Optional. Timeout for the HTTP request, in seconds.</p></li>
<li><p><strong>http_request_session</strong> – Optional. Session object to use for HTTP requests.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output AMQP network trace to the logger.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id47">
<div class="code-block-caption"><span class="caption-text">Create a ServiceBusClient.</span><a class="headerlink" href="#id47" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">ServiceBusClient</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">namespace</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_HOSTNAME&#39;</span><span class="p">]</span>
<span class="n">shared_access_policy</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_SAS_POLICY&#39;</span><span class="p">]</span>
<span class="n">shared_access_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_SAS_KEY&#39;</span><span class="p">]</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">ServiceBusClient</span><span class="p">(</span>
    <span class="n">service_namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
    <span class="n">shared_access_key_name</span><span class="o">=</span><span class="n">shared_access_policy</span><span class="p">,</span>
    <span class="n">shared_access_key_value</span><span class="o">=</span><span class="n">shared_access_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.from_connection_string">
<em class="property">classmethod </em><code class="sig-name descname">from_connection_string</code><span class="sig-paren">(</span><em class="sig-param">conn_str</em>, <em class="sig-param">*</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.from_connection_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.from_connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Service Bus client from a connection string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn_str</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The connection string.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id48">
<div class="code-block-caption"><span class="caption-text">Create a ServiceBusClient via a connection string.</span><a class="headerlink" href="#id48" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">ServiceBusClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.get_queue">
<code class="sig-name descname">get_queue</code><span class="sig-paren">(</span><em class="sig-param">queue_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.get_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a queue entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the queue.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.QueueClient" title="azure.servicebus.aio.async_client.QueueClient">QueueClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the queue is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id49">
<div class="code-block-caption"><span class="caption-text">Get a QueueClient for the specified queue.</span><a class="headerlink" href="#id49" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">queue_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_queue</span><span class="p">(</span><span class="s2">&quot;MyQueue&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.get_subscription">
<code class="sig-name descname">get_subscription</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em>, <em class="sig-param">subscription_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_subscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.get_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a subscription entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic.</p></li>
<li><p><strong>subscription_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the subscription.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.SubscriptionClient" title="azure.servicebus.aio.async_client.SubscriptionClient">SubscriptionClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the subscription is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id50">
<div class="code-block-caption"><span class="caption-text">Get a TopicClient for the specified topic.</span><a class="headerlink" href="#id50" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">subscription_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_subscription</span><span class="p">(</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">,</span> <span class="s2">&quot;MySubscription&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.get_topic">
<code class="sig-name descname">get_topic</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.get_topic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.get_topic" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for a topic entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#azure.servicebus.aio.async_client.TopicClient" title="azure.servicebus.aio.async_client.TopicClient">TopicClient</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the topic is not found.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id51">
<div class="code-block-caption"><span class="caption-text">Get a TopicClient for the specified topic.</span><a class="headerlink" href="#id51" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">azure.servicebus</span> <span class="kn">import</span> <span class="n">ServiceBusResourceNotFound</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">topic_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_topic</span><span class="p">(</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ServiceBusResourceNotFound</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.list_queues">
<code class="sig-name descname">list_queues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_queues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.list_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get async clients for all queue entities in the namespace.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.QueueClient" title="azure.servicebus.aio.async_client.QueueClient">QueueClient</a>]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.list_subscriptions">
<code class="sig-name descname">list_subscriptions</code><span class="sig-paren">(</span><em class="sig-param">topic_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_subscriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.list_subscriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for all subscription entities in the topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The topic to list subscriptions for.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.SubscriptionClient" title="azure.servicebus.aio.async_client.SubscriptionClient">SubscriptionClient</a>]</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusResourceNotFound if the topic is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.ServiceBusClient.list_topics">
<code class="sig-name descname">list_topics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#ServiceBusClient.list_topics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusClient.list_topics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an async client for all topic entities in the namespace.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#list" title="(in Python v3.5)">list</a>[<a class="reference internal" href="#azure.servicebus.aio.async_client.TopicClient" title="azure.servicebus.aio.async_client.TopicClient">TopicClient</a>]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>~azure.servicebus.common.errors.ServiceBusConnectionError if the namespace is not found.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.QueueClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">QueueClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#QueueClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.QueueClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.SendClientMixin" title="azure.servicebus.aio.async_client.SendClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.SendClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.ReceiveClientMixin" title="azure.servicebus.aio.async_client.ReceiveClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.ReceiveClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A queue client.</p>
<p>The QueueClient class defines a high level interface for sending
messages to and receiving messages from an Azure Service Bus queue.
If you do not wish to perform management operations, a QueueClient can be
instantiated directly to perform send and receive operations to a Queue.
However if a QueueClient is created directly, a <cite>get_properties</cite> operation will
need to be completed in order to retrieve the properties of this queue (for example,
whether it is sessionful).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the queue to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-text">Create a QueueClient.</span><a class="headerlink" href="#id52" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">QueueClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">queue_client</span> <span class="o">=</span> <span class="n">QueueClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MyQueue&quot;</span><span class="p">)</span>
<span class="n">queue_properties</span> <span class="o">=</span> <span class="n">queue_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>

</pre></div>
</div>
</div>
<p>Construct a new Client to interact with the named Service Bus entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the entity to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.TopicClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">TopicClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#TopicClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.TopicClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.SendClientMixin" title="azure.servicebus.aio.async_client.SendClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.SendClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A topic client.</p>
<p>The TopicClient class defines a high level interface for sending
messages to an Azure Service Bus Topic.
If you do not wish to perform management operations, a TopicClient can be
instantiated directly to perform send operations to a Topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id53">
<div class="code-block-caption"><span class="caption-text">Create a TopicClient.</span><a class="headerlink" href="#id53" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">TopicClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">topic_client</span> <span class="o">=</span> <span class="n">TopicClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="n">topic_properties</span> <span class="o">=</span> <span class="n">topic_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Construct a new Client to interact with the named Service Bus entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the entity to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.SubscriptionClient">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">SubscriptionClient</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">shared_access_key_name=None</em>, <em class="sig-param">shared_access_key_value=None</em>, <em class="sig-param">loop=None</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.SubscriptionClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#azure.servicebus.aio.async_client.ReceiveClientMixin" title="azure.servicebus.aio.async_client.ReceiveClientMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.ReceiveClientMixin</span></code></a>, <a class="reference internal" href="#azure.servicebus.aio.async_client.BaseClient" title="azure.servicebus.aio.async_client.BaseClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.aio.async_client.BaseClient</span></code></a></p>
<p>A subscription client.</p>
<p>The SubscriptionClient class defines a high level interface for receiving
messages to an Azure Service Bus Subscription.
If you do not wish to perform management operations, a SubscriptionClient can be
instantiated directly to perform receive operations from a Subscription.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The full URI of the Service Bus namespace. This can optionally
include URL-encoded access name and key.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the topic to which the Client will connect.</p></li>
<li><p><strong>shared_access_key_name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the shared access policy. This must be supplied
if not encoded into the address.</p></li>
<li><p><strong>shared_access_key_value</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The shared access key. This must be supplied if not encoded
into the address.</p></li>
<li><p><strong>loop</strong> (<em>EventLoop</em>) – An async event loop</p></li>
<li><p><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) – Whether to output network trace logs to the logger. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id54">
<div class="code-block-caption"><span class="caption-text">Create a SubscriptionClient.</span><a class="headerlink" href="#id54" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">azure.servicebus.aio</span> <span class="kn">import</span> <span class="n">SubscriptionClient</span>

<span class="n">connection_str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SERVICE_BUS_CONNECTION_STR&#39;</span><span class="p">]</span>
<span class="n">subscription_client</span> <span class="o">=</span> <span class="n">SubscriptionClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MySubscription&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="o">=</span><span class="s2">&quot;MyTopic&quot;</span><span class="p">)</span>
<span class="n">properties</span> <span class="o">=</span> <span class="n">subscription_client</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="azure.servicebus.aio.SubscriptionClient.from_connection_string">
<em class="property">classmethod </em><code class="sig-name descname">from_connection_string</code><span class="sig-paren">(</span><em class="sig-param">conn_str</em>, <em class="sig-param">name</em>, <em class="sig-param">topic=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient.from_connection_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.SubscriptionClient.from_connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SubscriptionClient from a connection string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn_str</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The connection string.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the Subscription.</p></li>
<li><p><strong>topic</strong> (<a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) – The name of the Topic, if the EntityName is
not included in the connection string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="azure.servicebus.aio.SubscriptionClient.from_entity">
<em class="property">classmethod </em><code class="sig-name descname">from_entity</code><span class="sig-paren">(</span><em class="sig-param">address</em>, <em class="sig-param">topic</em>, <em class="sig-param">entity</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/aio/async_client.html#SubscriptionClient.from_entity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.SubscriptionClient.from_entity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="azure.servicebus.aio.ReceiveSettleMode">
<em class="property">class </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ReceiveSettleMode</code><a class="reference internal" href="../_modules/azure/servicebus/common/constants.html#ReceiveSettleMode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ReceiveSettleMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/enum.html#enum.Enum" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>An enumeration.</p>
<dl class="attribute">
<dt id="azure.servicebus.aio.ReceiveSettleMode.PeekLock">
<code class="sig-name descname">PeekLock</code><em class="property"> = &lt;ReceiverSettleMode.PeekLock: 1&gt;</em><a class="headerlink" href="#azure.servicebus.aio.ReceiveSettleMode.PeekLock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="azure.servicebus.aio.ReceiveSettleMode.ReceiveAndDelete">
<code class="sig-name descname">ReceiveAndDelete</code><em class="property"> = &lt;ReceiverSettleMode.ReceiveAndDelete: 0&gt;</em><a class="headerlink" href="#azure.servicebus.aio.ReceiveSettleMode.ReceiveAndDelete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.ServiceBusError">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ServiceBusError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#ServiceBusError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#Exception" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>An error occured.</p>
<p>This is the parent of all Service Bus errors and can
be used for default error handling.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.ServiceBusResourceNotFound">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ServiceBusResourceNotFound</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#ServiceBusResourceNotFound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusResourceNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>The Service Bus entity could not be reached.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.ServiceBusConnectionError">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ServiceBusConnectionError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#ServiceBusConnectionError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusConnectionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>An error occured in the connection.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.ServiceBusAuthorizationError">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">ServiceBusAuthorizationError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#ServiceBusAuthorizationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.ServiceBusAuthorizationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>An error occured when authorizing the connection.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.InvalidHandlerState">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">InvalidHandlerState</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#InvalidHandlerState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.InvalidHandlerState" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>An attempt to run a handler operation that the handler is not in the right state to perform.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.NoActiveSession">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">NoActiveSession</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#NoActiveSession"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.NoActiveSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>No active Sessions are available to receive from.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.MessageAlreadySettled">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">MessageAlreadySettled</code><span class="sig-paren">(</span><em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#MessageAlreadySettled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.MessageAlreadySettled" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>Failed to settle the message.</p>
<p>An attempt was made to complete an operation on a message that has already
been settled (completed, abandoned, dead-lettered or deferred).
This error will also be raised if an attempt is made to settle a message
received via ReceiveAndDelete mode.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.MessageSettleFailed">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">MessageSettleFailed</code><span class="sig-paren">(</span><em class="sig-param">action</em>, <em class="sig-param">inner_exception</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#MessageSettleFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.MessageSettleFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>Attempt to settle a message failed.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.MessageSendFailed">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">MessageSendFailed</code><span class="sig-paren">(</span><em class="sig-param">inner_exception</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#MessageSendFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.MessageSendFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>A message failed to send to the Service Bus entity.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.MessageLockExpired">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">MessageLockExpired</code><span class="sig-paren">(</span><em class="sig-param">message=None</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#MessageLockExpired"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.MessageLockExpired" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>The lock on the message has expired and it has been released back to the queue.</p>
<p>It will need to be received again in order to settle it.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.SessionLockExpired">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">SessionLockExpired</code><span class="sig-paren">(</span><em class="sig-param">message=None</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#SessionLockExpired"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.SessionLockExpired" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>The lock on the session has expired.</p>
<p>All unsettled messages that have been received can no longer be settled.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.AutoLockRenewFailed">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">AutoLockRenewFailed</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#AutoLockRenewFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.AutoLockRenewFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>An attempt to renew a lock on a message or session in the background has failed.</p>
</dd></dl>

<dl class="exception">
<dt id="azure.servicebus.aio.AutoLockRenewTimeout">
<em class="property">exception </em><code class="sig-prename descclassname">azure.servicebus.aio.</code><code class="sig-name descname">AutoLockRenewTimeout</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">inner_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/azure/servicebus/common/errors.html#AutoLockRenewTimeout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#azure.servicebus.aio.AutoLockRenewTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="azure.servicebus.common.html#azure.servicebus.common.errors.ServiceBusError" title="azure.servicebus.common.errors.ServiceBusError"><code class="xref py py-class docutils literal notranslate"><span class="pre">azure.servicebus.common.errors.ServiceBusError</span></code></a></p>
<p>The time allocated to renew the message or session lock has elapsed.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="azure.servicebus.common.html" class="btn btn-neutral float-right" title="azure.servicebus.common package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="azure.servicebus.html" class="btn btn-neutral float-left" title="azure.servicebus package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-36"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62780441-36');
</script>


</body>
</html>